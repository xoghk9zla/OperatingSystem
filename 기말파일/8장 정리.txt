***운영체제 8장 스케줄링 : 멀티 레벨 피트백 큐(ppt 140~)***
***MLFQ의 규칙의 문제점, 규칙들 대충 이해***

MLFQ(멀티 레벨 피트백 큐)가 해결하려는 문제는 두가지.
-1.짧은 작업을 먼저 실행시켜 반환시간 최적화.
-2.사용자에게 빠른 응답시간을 제공.



MLFQ의 구성형태
-여러개의 큐가 존재.

-각 큐는 서로 다른 우선순위를 가진다.
(요약하면, 높은 우선순위 큐에 존재하는 작업이 선택되며
높은 우선순위를 가진 작업이 높은 우선순위 큐에 존재한다.)

-하나의 큐에 둘 이상의 작업이 존재할 수 있다.
(같은 큐에 존재하는 작업들은 라운드로빈 형식으로 작업이 수행된다.)

-각 작업의 특성에 따라 동적으로 우선순위를 부여한다.
(키보드 입력 등등, CPU를 자주 양보하는 작업은 우선순위를 높게 유지.
반대로, CPU를 집중적으로 사용하는 작업은 우선순위를 낮게 유지.)




MLFQ의 규칙.

규칙1. 작업 A,B에 대해 우선순위(A) > 우선순위(B)라면 A가 수행된다.
규칙2. 작업 A,B에 대해 우선순위(A) = 우선순위(B)라면 RR(라운드로빈)방식으로 수행된다.
규칙3. 작업이 시스템에 진입하면, 가장 높은 우선순위, 즉 맨 위의 큐에 놓인다.
규칙4a. 주어진 타임슬라이스가 소진되면 우선순위는 낮아진다.(한 단계 아래 큐로 이동)
규칙4b. 타임슬라이스가 소진되기전, CPU를 양도하면, 우선순위를 유지한다.



(규칙 4a, 규칙 4b가 있는)현재 MLFQ 규칙의 문제점

1.기아 상태가 발생할 수 있다.
(너무 많은 대화형 작업이 존재하면, 모든 CPU시간을 소모하게 될 것이고, 긴 실행 시간 작업은 CPU 시간을 할당받지 못하게 된다.)

2.사용자가 스케줄러를 자신에게 유리하게 동작하도록 프로그램을 작성 할 수 있다.
(스케줄러를 속여, 지정된 몫보다 더 많은 시간을 할당하게 된다면,
사용자가 우선순위를 마음대로 조작할 수 있게 된다.)



현재 MLFQ 규칙의 문제점을 해결하기 위해 몇 가지 규칙을 추가한다.

규칙 5. 일정 기간이 지나면, 모든 작업을 최상의 큐로 이동시킨다.
(MLFQ규칙의 문제점 1번 해결, 작업의 특성이 입출력 위주로 변했다면, 스케줄을 조정할 수 있게된다.)

규칙 5에서 정해야할 일정 기간의 크기를 부두 상수라고한다.

규칙4a. 규칙4b를 규칙4로 통합하여 MLFQ규칙의 문제점 2번을 해결한다.
규칙4. CPU양도 횟수와 상관 없이 주어진 단계에서 시간 할당량을 소진하면 우선순위 강등.




MLFQ의 조정

대부분의 MLFQ기법들은 큐 별로 타임 슬라이스를 변경할 수 있다.
보통, 우선순위가 높은 큐는 짧은 타임슬라이스를, 낮은 큐는 높은 타임슬라이스를 준다.
